@using AnsibeProject.Models;
@model List<Section>;

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers


@{
    Dictionary<string, List<Section>> professorSections = new Dictionary<string, List<Section>>();

    foreach (var section in Model)
    {

        var professorName = section.Professor.FirstName+ " "+ section.Professor.LastName;

        if (!professorSections.ContainsKey(professorName))
        {
            professorSections[professorName] = new List<Section>();
        }
        professorSections[professorName].Add(section);
    }
}

<section class="Assign">
<div >

    <table class="table Active-datatable">
        <thead>
            <tr>
                
                <th>Professor Name</th>

                <th>Section </th>
                <th></th>


            </tr>
        </thead>
        <tbody>
            

        @foreach (var professor in professorSections)
        {
                            
            
            <tr>
               
                <td>
                    @professor.Key
                </td>

                            
                

                <td>
                                           

                     
                                                    
                    <table class="table Active-datatable">
                        <thead>
                        <th>Course Code</th>
                        <th>Course Description</th>
                        <th>Course Hours</th>
                        <th>TD</th>
                        <th>TP</th>
                        <th>Language</th>

                                <th><button class="inline-btn">Assign</button></th>
                        </thead>
                        <tbody>
                    @foreach (var s in professor.Value)
                    {
                            <tr>

                                <td>
                                    @s.Course.CourseCode
                                </td>
                                <td>
                                    @s.Course.CourseDescription
                                </td>
                                <td>
                                    @s.CourseHours
                                </td>
                                <td>
                                    @s.TD
                                </td>

                                <td>
                                    @s.TP
                                </td>

                                <td>
                                    @s.Language
                                </td>
                                
                                <td>
                                    <button class="inline-delete-btn">Delete</button>
                                </td>
                            </tr>
                      }
                        </tbody>
                    </table>
                                                    
                    
                    
                 </td>
                        
                                            
        </tr>
        }
                                           
    </tbody>             
    </table>
   
</div>
</section>