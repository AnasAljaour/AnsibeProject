@using AnsibeProject.Models;
@model List<Section>;

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Dictionary<string, List<Section>> courseSections = new Dictionary<string, List<Section>>();

    foreach (var section in Model)
    {

    var courseCode = section.Course.CourseCode;

        if (!courseSections.ContainsKey(courseCode))
            {
            courseSections[courseCode] = new List<Section>();
        }
        courseSections[courseCode].Add(section);
    }
}

<section class="Assign">
    <div>
        
                    <form method="post" class="toggle-div visible" style="display: visible;">

                        <table class="table table-striped Active-datatable">
                            <thead>
                                <tr>
                                    <th>Course Code</th>
                                    <th>Section </th>


                                </tr>
                            </thead>
                            <tbody>
                                

                                    @foreach (var course in courseSections)
                                    {
                            
                            <tr>
                                <td>
                                    @course.Key
                                </td>
                                
                                <td>
                                    <table class="table table-striped Active-datatable">
                                        <thead>
                                            <th>Professor</th>

                                            
                                            <th>Course Hours</th>
                                            <th>TD</th>
                                            <th>TP</th>
                                            <th>Language</th>
                                            <th>Assign</th>
                                            <th>Delete</th>
                                        </thead>
                                        <tbody>


                                            
                        @foreach (var s in Model)
                        {
                            
                                                        <tr>
                                                            
                                                            <td>
                                                    @s.Professor.FullNameInArabic
                                                </td>

                                                
                                                <td>
                                                    @s.CourseHours
                                                </td>
                                                <td>
                                                    @s.TD
                                                </td>

                                                <td>
                                                    @s.TP
                                                </td>

                                                <td>
                                                    @s.Language
                                                </td>
                                                <td>
                                                    <button class="inline-btn">Assign</button>
                                                </td>

                                                <td>
                                                    <button class="inline-delete-btn">Delete</button>
                                                </td>

                                            </tr>
                                }
                                  
                            </tbody>
                            </table>
                            </td>
                            </tr>
                        }
                    
                    
                </tbody>
                        </table>

                    </form>



                
    </div>
</section>